function base64_encode(a){if("function"==typeof this.window.btoa)return btoa(unescape(encodeURIComponent(a)));var c,d,e,f,g,h,i,j,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k=0,l=0,m="",n=[];if(!a)return a;do c=a.charCodeAt(k++),d=a.charCodeAt(k++),e=a.charCodeAt(k++),j=c<<16|d<<8|e,f=j>>18&63,g=j>>12&63,h=j>>6&63,i=63&j,n[l++]=b.charAt(f)+b.charAt(g)+b.charAt(h)+b.charAt(i);while(k<a.length);m=n.join("");var o=a.length%3;return(o?m.slice(0,o-3):m)+"===".slice(o||3)}!function(a){"undefined"!=typeof module&&"object"==typeof exports?"undefined"!=typeof window?module.exports=a():module.exports=a:window.clajax=a()}(function(root){var clajax=function(a){this.id=-1,this.form=a?a.form:null,this.action=a?a.action:null,this.method=a?a.method:null,this.url=a?a.url:null,this.json=a?a.json:null,this.xml=a?a.xml:null,this.mpart=a?a.mpart:null,this.target=a?a.target:null,this.responseType=a?a.responseType:null,this.asynchronous=!a||a.asynchronous,this.rel=a?a.rel:null,this.media=a?a.media:null,this.contentEncoding=a?a.contentEncoding:null,this.contentType=a?a.contentType:null,this.progressWait=a?a.progressWait:null,this.mimeType=a?a.mimeType:null,this.start=a?a.start:null,this.success=a?a.success:null,this.ready=a?a.ready:null,this.fail=a?a.fail:null,this.error=a?a.error:null,this.finish=a?a.finish:null,this.timeout=a?a.timeout:null,this.base64=!!a&&(!!a.base64&&a.base64),this.asJson=!!a&&(!!a.asJson&&a.asJson),this.asXml=!!a&&(!!a.asXml&&a.asXml),this.asMpart=!!a&&(!!a.asMpart&&a.asMpart),this.asScript=!!a&&(!!a.asScript&&a.asScript),this.asCss=!!a&&(!!a.asCss&&a.asCss),this.opened=!!a&&(!!a.opened&&a.opened),this.http=null,this.acceptableStatus=a?a.acceptableStatus:[],this.acceptableReadyState=a?a.acceptableReadyState:[],this.requestHeaders=a?a.requestHeaders:[],this.extention=a&&a.extention?a.extention:{}};return clajax.prototype={clear:function(){return this.form=null,this.action=null,this.method=null,this.url=null,this.json=null,this.xml=null,this.mpart=null,this.target=null,this.responseType=null,this.asynchronous=!0,this.rel=null,this.media=null,this.contentEncoding=null,this.contentType=null,this.progressWait=null,this.mimeType=null,this.start=null,this.success=null,this.ready=null,this.fail=null,this.error=null,this.finish=null,this.timeout=null,this.base64=!1,this.asJson=!1,this.asXml=!1,this.asMpart=!1,this.asScript=!1,this.asCss=!1,this.opened=!1,this.acceptableStatus=[],this.acceptableReadyState=[],this.requestHeaders=[],this.extention={},this},setForm:function(a){return this.form=a,this},setMethod:function(a){return this.method=a,this},setAction:function(a){return this.action=a,this},setUrl:function(a){return this.url=a,this},setJson:function(a){return this.json=a,this},setXml:function(a){return this.xml=a,this},setMpart:function(a){return this.mpart=a,this},setTarget:function(a){return this.target=a,this},setRel:function(a){return this.rel=a,this},setMedia:function(a){return this.media=a,this},setResponseType:function(a){return this.responseType=a,this},setAsynchronous:function(a){return this.asynchronous=a,this},setContentEncoding:function(a){return this.contentEncoding=a,this},setContentType:function(a){return this.contentType=a,this},setMimeType:function(a){return this.mimeType=a,this},setStart:function(a){return this.start=a,this},setSuccess:function(a){return this.success=a,this},setRedy:function(a){return this.ready=a,this},setFail:function(a){return this.fail=a,this},setError:function(a){return this.error=a,this},setFinish:function(a){return this.finish=a,this},setTimeout:function(a){return this.timeout=a,this},setBase64:function(a){return this.base64=a,this},setAsJson:function(a){return this.asJson=a,this},setAsXml:function(a){return this.asXml=a,this},setAsMpart:function(a){return this.asMpart=a,this},setAsScript:function(a){return this.asScript=a,this},setAsCss:function(a){return this.asCss=a,this},setOpened:function(a){return this.opened=a,this},setAcceptableStatus:function(a){return this.acceptableStatus=a,this},setAcceptableReadyState:function(a){return this.acceptableReadyState=a,this},setRequestHeaders:function(a){return this.requestHeaders=a,this},setExtention:function(a){return this.extention=a,this},setId:function(a){return this.id=a,this},extend:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);return this},instance:function(){if(this.extention){var a=Object.create(this).extend(this.extention);return a.setId((new Date).getTime())}return this},clone:function(){if(this.extention){var a=Object.create(this._clone()).extend(this.extention);return a.setId((new Date).getTime())}return this._clone().setId((new Date).getTime())},_clone:function(){var a=(new clajax).setForm(this.form).setMethod(this.method).setAction(this.action).setUrl(this.url).setJson(this.json).setXml(this.xml).setMpart(this.mpart).setTarget(this.target).setRel(this.rel).setMedia(this.media).setResponseType(this.responseType).setContentEncoding(this.contentEncoding).setContentType(this.contentType).setAsynchronous(this.asynchronous).setMimeType(this.mimeType).setStart(this.start).setSuccess(this.success).setRedy(this.ready).setFail(this.fail).setError(this.error).setFinish(this.finish).setTimeout(this.timeout).setBase64(this.base64).setAsJson(this.asJson).setAsXml(this.asXml).setAsMpart(this.asMpart).setAsScript(this.asScript).setAsCss(this.asCss).setOpened(this.opened).setAcceptableStatus(this.acceptableStatus).setAcceptableReadyState(this.acceptableReadyState).setRequestHeaders(this.requestHeaders).setExtention(this.extention);return a},exception:function(a){var b=a.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@").split("\n");console.log(b)},load:function(_url){if(_url&&(this.url=_url),0==this.asScript&&0==this.asCss&&this.url&&(this.url.lastIndexOf(".js")==this.url.length-3||this.url.indexOf(".js?")>-1?this.asScript=!0:(this.url.lastIndexOf(".css")==this.url.length-4||this.url.indexOf(".css?")>-1)&&(this.asCss=!0)),this.url&&this.asScript){var e=document.createElement("script");if(this.base64){var parameters=this.getParametersAsUrl(null,this.url);this.url.indexOf("?")>-1?e.src=this.url.substring(0,this.url.indexOf("?"))+parameters:e.src=this.url+parameters}else e.src=this.url;this.type&&""!=this.type?e.type=this.type:e.type="text/javascript",this.rel&&""!=this.rel&&(e.rel=this.rel),this.contentEncoding&&""!=this.contentEncoding&&(e.charset=this.contentEncoding);var instance=this.clone();try{instance.success&&""!=instance.success&&("function"==typeof instance.success?(e.onload=instance.success,e.onreadystatechange=function(){"complete"==this.readyState&&instance.success()}):(e.onload=eval(instance.success+"()"),e.onreadystatechange=function(){"complete"==this.readyState&&eval(instance.success+"()")}))}catch(a){this.exception(a)}try{document.getElementsByTagName("head")[0].appendChild(e)}catch(a){this.exception(a)}}if(this.url&&this.asCss){var e=document.createElement("link");if(this.base64){var parameters=this.getParametersAsUrl(null,this.url);href.indexOf("?")>-1?e.href=this.url.substring(0,this.url.indexOf("?"))+parameters:e.href=this.url+parameters}else e.href=this.url;this.type&&""!=this.type?e.type=this.type:e.type="text/css",this.rel&&""!=this.rel?e.rel=rel:e.rel="stylesheet",this.media&&""!=this.media&&(e.media=this.media),this.contentEncoding&&""!=this.contentEncoding&&(e.charset=this.contentEncoding);var instance=this.clone();try{instance.success&&""!=instance.success&&("function"==typeof instance.success?(e.onload=instance.success,e.onreadystatechange=function(){"complete"==this.readyState&&instance.success()}):(e.onload=eval(instance.success+"()"),e.onreadystatechange=function(){"complete"==this.readyState&&eval(instance.success+"()")}))}catch(a){this.exception(a)}try{document.getElementsByTagName("head")[0].appendChild(e)}catch(a){this.exception(a)}}return this},submit:function(a,b){return a&&(this.form=a),this.form&&(b?this.action=b:this.action=this.form.action,this.asJson?this.setUrl(this.action).setJson(this.getParametersAsJson(this.form,this.action)).request(this.form.method):this.asXml?this.setUrl(this.action).setXml(this.getParametersAsXml(this.form,this.action)).request(this.form.method):this.asMpart?this.setUrl(this.action).setMpart(this.getParametersAsMpart(this.form,this.action)).request(this.form.method):this.setUrl(this.action+this.getParametersAsUrl(this.form,this.action)).request(this.form.method)),this},request:function(_method){_method&&""!=_method&&(this.method=_method);var urlOnly="",parametersOnly="",sendJson;if(0==this.asJson&&this.json&&(this.json.length>0||"object"==typeof this.json)?this.asJson=!0:0==this.asXml&&this.xml&&this.xml.length>0?this.asXml=!0:0==this.asMpart&&this.mpart&&(this.asMpart=!0),0==this.asJson&&0==this.asXml&&0==this.asMpart){if(this.url)if(this.url.indexOf("?")>-1){var pos=this.url.indexOf("?");urlOnly=this.url.substring(0,pos),parametersOnly=this.url.substring(pos+1)}else urlOnly=this.url;parametersOnly+=""==parametersOnly?"js4ajax=true":"&js4ajax=true"}else if(this.asJson){if(sendJson="object"==typeof this.json?this.json:JSON.parse(this.json),this.url)if(this.url.indexOf("?")>-1){var pos=this.url.indexOf("?");urlOnly=this.url.substring(0,pos);var urlParameters=this.url.substring(pos+1,this.url.length);if(urlParameters.length>0){urlParameters=decodeURIComponent(urlParameters);for(var chunks=urlParameters.split("&"),c=0;c<chunks.length;c++){var split=chunks[c].split("=",2);sendJson[split[0]]=split[1]}}}else urlOnly=this.url;sendJson.js4ajax="true"}else if(this.asXml)urlOnly=this.url;else if(this.asMpart){if(this.url)if(this.url.indexOf("?")>-1){var pos=this.url.indexOf("?");urlOnly=this.url.substring(0,pos);var urlParameters=this.url.substring(pos+1,this.url.length);if(urlParameters.length>0){urlParameters=decodeURIComponent(urlParameters);for(var chunks=urlParameters.split("&"),c=0;c<chunks.length;c++){var split=chunks[c].split("=",2);this.mpart.append(split[0],split[1])}}}else urlOnly=this.url;this.mpart.append("js4ajax","true")}if(this.start&&""!=this.start&&("function"==typeof this.start?this.start(this):eval(this.start+"(this)")),this.target)try{this.progressWait&&""!=this.progressWait&&(this.target.innerHTML=this.progressWait)}catch(a){this.exception(a)}var http_request=!1,setResponseType=!1;if(this.http)http_request=this.http,this.opened=!0;else{if(window.ActiveXObject)try{http_request=new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{http_request=new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}if(window.XMLHttpRequest)if(http_request=new XMLHttpRequest,this.responseType&&""!=this.responseType)try{http_request.responseType=this.responseType,setResponseType=!0}catch(a){this.exception(a)}else http_request.overrideMimeType&&(this.mimeType&&""!=this.mimeType?http_request.overrideMimeType(this.mimeType):http_request.overrideMimeType("text/html"));this.http=http_request}if(!http_request)return void(instance.error&&""!=instance.error?"function"==typeof instance.error?instance.error(http_request,null,"Cannot create XMLHTTP instance"):eval(instance.error+'(http_request, null, "Cannot create XMLHTTP instance")'):alert("Cannot create XMLHTTP instance"));var instance=this.clone();if(http_request.onreadystatechange=function(){try{var readyStateAccepted=!1,_facceptableStatus;if(4==http_request.readyState&&(readyStateAccepted=!0),instance.acceptableReadyState&&instance.acceptableReadyState.length>0){for(var acceptable=null,i=0;!acceptable&&i<instance.acceptableReadyState.length;)instance.acceptableReadyState[i].readyState==http_request.readyState&&(acceptable=instance.acceptableReadyState[i]),i++;if(!acceptable)for(i=0;!acceptable&&i<instance.acceptableReadyState.length;)instance.acceptableReadyState[i].readyState==-1&&(acceptable=instance.acceptableReadyState[i]),i++;acceptable&&(readyStateAccepted=!0,_facceptableStatus=acceptable.acceptableStatus)}if(readyStateAccepted){var statusAccepted=!1,_fready,_fsuccess,_ffail,_ffinish,_ferror;if(200==http_request.status&&(statusAccepted=!0,instance.ready&&""!=instance.ready&&(_fready=instance.ready),instance.success&&""!=instance.success&&(_fsuccess=instance.success),instance.fail&&""!=instance.fail&&(_ffail=instance.fail),instance.finish&&""!=instance.finish&&(_ffinish=instance.finish),instance.error&&""!=instance.error&&(_ferror=instance.error)),_facceptableStatus&&_facceptableStatus.length>0||instance.acceptableStatus&&instance.acceptableStatus.length>0&&(_facceptableStatus=instance.acceptableStatus),_facceptableStatus&&_facceptableStatus.length>0){for(var acceptable=null,i=0;!acceptable&&i<_facceptableStatus.length;)_facceptableStatus[i].status==http_request.status&&(acceptable=_facceptableStatus[i]),i++;if(!acceptable)for(i=0;!acceptable&&i<_facceptableStatus.length;)_facceptableStatus[i].status==-1&&(acceptable=_facceptableStatus[i]),i++;acceptable&&(statusAccepted=!0,acceptable.ready&&""!=acceptable.ready?_fready=acceptable.ready:instance.ready&&""!=instance.ready&&(_fready=instance.ready),acceptable.success&&""!=acceptable.success?_fsuccess=acceptable.success:instance.success&&""!=instance.success&&(_fsuccess=instance.success),acceptable.fail&&""!=acceptable.fail?_ffail=acceptable.fail:instance.fail&&""!=instance.fail&&(_ffail=instance.fail),acceptable.finish&&""!=acceptable.finish?_ffinish=acceptable.finish:instance.finish&&""!=instance.finish&&(_ffinish=instance.finish),acceptable.error&&""!=acceptable.error?_ferror=acceptable.finish:instance.error&&""!=instance.error&&(_ferror=instance.error))}try{1==statusAccepted?(_fready?"function"==typeof _fready?_fready(http_request,instance):eval(_fready+"(http_request,instance)"):instance.target&&(instance.target.innerHTML=http_request.responseText),_fsuccess&&("function"==typeof _fsuccess?_fsuccess(http_request,instance):eval(_fsuccess+"(http_request,instance)"))):_ffail&&("function"==typeof _ffail?_ffail(http_request,instance):eval(_ffail+"(http_request,instance)"))}catch(e){instance.exception(e),_ferror?"function"==typeof _ferror?_ferror(http_request,e,e.toString(),instance):eval(_ferror+"(http_request, e, e.toString(), instance)"):alert("There was a generic problem with callback_function():"+e.toString())}_ffinish&&("function"==typeof _ffinish?_ffinish(http_request,instance):eval(_ffinish+"(http_request,instance)"))}}catch(e){instance.exception(e),instance.error&&""!=instance.error?"function"==typeof instance.error?instance.error(http_request,e,e.toString(),instance):eval(instance.error+"(http_request, e, e.toString(), instance)"):alert("There was a generic problem with callback_function():"+e.toString())}},this.timeout&&""!=this.timeout&&(http_request.ontimeout=function(){"function"==typeof instance.timeout?instance.timeout(http_request,this):eval(instance.timeout+"(http_request,this)")}),this.asynchronous||(this.asynchronous=!0),!this.opened){if(this.method&&""!=this.method?"GET"==this.method?http_request.open(this.method,this.url,this.asynchronous):http_request.open(this.method,urlOnly,this.asynchronous):http_request.open("POST",urlOnly,this.asynchronous),this.responseType&&""!=this.responseType&&0==setResponseType)try{http_request.responseType=this.responseType}catch(a){this.exception(a)}if(this.contentType&&""!=this.contentType?http_request.setRequestHeader("Content-type",this.contentType):this.asJson?http_request.setRequestHeader("Content-type","application/json"):this.asXml?http_request.setRequestHeader("Content-type","application/xml"):this.asMpart||http_request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.contentEncoding&&""!=this.contentEncoding?http_request.setRequestHeader("Content-Encoding",this.contentEncoding):http_request.setRequestHeader("Content-Encoding","iso-8859-1"),this.requestHeaders&&this.requestHeaders.length>0)for(var i=0;i<this.requestHeaders.length;i++)try{http_request.setRequestHeader(this.requestHeaders[i].name,this.requestHeaders[i].value)}catch(a){this.exception(a)}}return 0==this.asJson&&0==this.asXml&&0==this.asMpart?http_request.send(parametersOnly):this.asJson?http_request.send(JSON.stringify(sendJson)):this.asXml?http_request.send(this.xml):this.asMpart&&http_request.send(this.mpart),instance},prepareUrl:function(a,b){return this.url=this.getParametersAsUrl(a,b),this},getParametersAsUrl:function(a,b){a||(a=this.form),b||(b=this.url);var c="?";if(b.indexOf("?")>-1&&(c="&"),this.base64&&(c+="$inputBase64=true&",b.indexOf("?")>-1)){var d=b.substring(b.indexOf("?")+1,b.length);if(d.length>0){d=decodeURIComponent(d);for(var e=d.split("&"),f=0;f<e.length;f++){var g=e[f].split("=",2);c+=g[0]+"="+encodeURIComponent(base64_encode(g[1]))+"&"}}}if(a)for(i=0;i<a.elements.length;i++){var j,h=a.elements[i];if(h.name&&""!=h.name?j=h.name:h.id&&""!=h.id&&(j=h.id),j&&b.indexOf("?"+j+"=")==-1&&b.indexOf("&"+j+"=")==-1&&("TEXT"!=h.type.toUpperCase()&&"HIDDEN"!=h.type.toUpperCase()&&"PASSWORD"!=h.type.toUpperCase()||(c+=this.base64?j+"="+encodeURIComponent(base64_encode(h.value))+"&":j+"="+encodeURIComponent(h.value)+"&"),"TEXTAREA"==h.type.toUpperCase()&&(c+=this.base64?j+"="+encodeURIComponent(base64_encode(h.value))+"&":j+"="+encodeURIComponent(h.value)+"&"),"CHECKBOX"==h.type.toUpperCase()&&(c+=h.checked?this.base64?j+"="+encodeURIComponent(base64_encode(h.value))+"&":j+"="+encodeURIComponent(h.value)+"&":this.base64?j+"=&":j+"=&"),"RADIO"==h.type.toUpperCase()&&h.checked&&(c+=this.base64?j+"="+encodeURIComponent(base64_encode(h.value))+"&":j+"="+encodeURIComponent(h.value)+"&"),0==h.type.toUpperCase().indexOf("SELECT"))){var k=h;try{c+=this.base64?k.name+"="+encodeURIComponent(base64_encode(k.options[k.selectedIndex].value))+"&":k.name+"="+encodeURIComponent(k.options[k.selectedIndex].value)+"&"}catch(a){this.exception(a)}}}return c},prepareJson:function(a,b){return this.json=this.getParametersAsJson(a,b),this},getParametersAsJson:function(a,b){var c;if(a||(a=this.form),b||(b=this.url),c=this.json?"object"==typeof this.json?this.json:JSON.parse(this.json):{},this.base64&&(c[$inputBase64]="true"),b.indexOf("?")>-1){var d=b.substring(b.indexOf("?")+1,b.length);if(d.length>0){d=decodeURIComponent(d);for(var e=d.split("&"),f=0;f<e.length;f++){var g=e[f].split("=",2);this.base64?c[g[0]]=base64_encode(g[1]):c[g[0]]=g[1]}}}try{for(i=0;i<a.elements.length;i++){var j,h=a.elements[i];if(h.name&&""!=h.name?j=h.name:h.id&&""!=h.id&&(j=h.id),j&&b.indexOf("?"+j+"=")==-1&&b.indexOf("&"+j+"=")==-1&&("TEXT"!=h.type.toUpperCase()&&"HIDDEN"!=h.type.toUpperCase()&&"PASSWORD"!=h.type.toUpperCase()||(this.base64?c[j]=base64_encode(h.value):c[j]=h.value),"TEXTAREA"==h.type.toUpperCase()&&(this.base64?c[j]=base64_encode(h.value):c[j]=h.value),"CHECKBOX"==h.type.toUpperCase()&&(h.checked?this.base64?c[j]=base64_encode(h.value):c[j]=h.value:c[j]=""),"RADIO"==h.type.toUpperCase()&&h.checked&&(this.base64?c[j]=base64_encode(h.value):c[j]=h.value),0==h.type.toUpperCase().indexOf("SELECT"))){var k=h;try{this.base64?c[k.name]=base64_encode(k.options[k.selectedIndex].value):c[k.name]=k.options[k.selectedIndex].value}catch(a){this.exception(a)}}}}catch(a){this.exception(a)}return JSON.stringify(c)},prepareMpart:function(a,b){return this.mpart=this.getParametersAsMpart(a,b),this},getParametersAsMpart:function(a,b){if(window.FormData){a||(a=this.form),b||(b=this.url);var c;if(c=this.mpart?this.mpart:new FormData,this.base64&&c.append("$inputBase64","true"),b.indexOf("?")>-1){var d=b.substring(b.indexOf("?")+1,b.length);if(d.length>0){d=decodeURIComponent(d);for(var e=d.split("&"),f=0;f<e.length;f++){var g=e[f].split("=",2);this.base64?c.append(g[0],base64_encode(g[1])):c.append(g[0],g[1])}}}try{for(i=0;i<a.elements.length;i++){var j,h=a.elements[i];if(h.name&&""!=h.name?j=h.name:h.id&&""!=h.id&&(j=h.id),j&&b.indexOf("?"+j+"=")==-1&&b.indexOf("&"+j+"=")==-1){if("TEXT"!=h.type.toUpperCase()&&"HIDDEN"!=h.type.toUpperCase()&&"PASSWORD"!=h.type.toUpperCase()||(this.base64?c.append(j,base64_encode(h.value)):c.append(j,h.value)),"TEXTAREA"==h.type.toUpperCase()&&(this.base64?c.append(j,base64_encode(h.value)):c.append(j,h.value)),"CHECKBOX"==h.type.toUpperCase()&&(h.checked?this.base64?c.append(j,base64_encode(h.value)):c.append(j,h.value):c.append(j,"")),"RADIO"==h.type.toUpperCase()&&h.checked&&(this.base64?c.append(j,base64_encode(h.value)):c.append(j,h.value)),0==h.type.toUpperCase().indexOf("SELECT")){var k=h;try{this.base64?c.append(k.name,base64_encode(k.options[k.selectedIndex].value)):c.append(k.name,k.options[k.selectedIndex].value)}catch(a){this.exception(a)}}"FILE"==h.type.toUpperCase()&&c.append(j,h.files[0])}}}catch(a){this.exception(a)}return c}alert("Features supported for object FormData (). Available in Chrome, FireFox, Safari, IE9...")}},clajax});