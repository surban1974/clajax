var GenericModel={extend:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);return this}},GenericServerModel=Object.create(GenericModel);GenericServerModel.extend({error:"",warning:"",info:"",success:"",init:function(t){return json2model(this,t),this},message:function(){return this.error&&""!=this.error&&alert("ERROR "+this.error),this.success&&""!=this.success&&alert(this.success),this.info&&""!=this.info&&alert("INFO: "+this.info),this.warning&&""!=this.warning&&alert("WARNING: "+this.warning),this}});var GenericViewModel=Object.create(GenericModel);function json2model(t,e){if(isEmpty(t))t=e;else for(var i in t)void 0===e[i]||("function"==typeof t[i]?t[i](e[i]):"object"==typeof t[i]?isEmpty(t[i])?t[i]=e[i]:Array===t[i].constructor&&t[i].length!=e[i].length?t[i]=e[i]:json2model(t[i],e[i]):t[i]=e[i])}function isEmpty(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return JSON.stringify(t)===JSON.stringify({})}function dirtyModelElements(t,e,i,n,r,o){for(var s in t){if(s.indexOf("$$hashKey")>=0)return;var c=!1,f=!0;if("object"==typeof t[s])r&&"function"==typeof r&&(c=r((n&&""!=n?n+".":"")+s)),o&&"function"==typeof o&&(f=o((n&&""!=n?n+".":"")+s)),!c&&f&&t[s]&&e[s]&&dirtyModelElements(t[s],e[s],i,(n&&""!=n?n+".":"")+s,r);else if("function"==typeof t[s]);else if(r&&"function"==typeof r&&(c=r(s)||r((n&&""!=n?n+".":"")+s)),o&&"function"==typeof o&&(f=o(s)&&o((n&&""!=n?n+".":"")+s)),!c&&f)try{if(t[s]!=e[s]){var l={};l[(n&&""!=n?n+".":"")+s]=t[s],i.push(l)}}catch(t){}}}GenericViewModel.extend({initialisation:!0,model:null,set:function(t){return this.model=t,this},init:function(t){this.initialisation=!0;try{this.model.init(t.model)}catch(t){showException(t)}return this.initialisation=!1,this},post:function(t,e){},postDirty:function(t,e){},getDirty:function(t,e,i){var n=[];return dirtyModelElements(this,t,n,null,e,i),n},message:function(){return this.model.message(),this}});